<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Bag - MiaoMiao Store</title>
    <link href="https://fonts.googleapis.com/css2?family=Kaisei+Tokumin:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script defer src="script.js"></script> 
    <script type="module" src="login.js" defer></script>
</head>
<body>

<!-- Nav Bar -->
<nav class="navbar">
    <!-- Hamburger Button -->
    <div class="nav-menu-icon" onclick="toggleMenu()">
        <img src="figmaPics/hamburger.png" alt="Menu">
    </div>

    <!-- Logo -->
    <div class="nav-logo">
        <a href="index.html"><img src="figmaPics/logo.png" alt="Logo"></a>
    </div>

    <!-- Right Icons -->
    <div class="nav-3icons">
        <a href="createacc.html"><img src="figmaPics/account.png" alt="Account"></a>
        <a href="wishlist.html"><img src="figmaPics/heart.png" alt="Wishlist"></a>
        <a href="bag.html"><img src="figmaPics/cart.png" alt="Bag"></a>
    </div>
</nav>

<!-- Dropdown Menu -->
<div class="nav-dropdown-menu" id="dropdown">
    <a href="index.html">Homepage</a>
    <a href="catalog.html">Catalog</a>
    <a href="vouchers.html">Vouchers & Discounts</a>
    <a href="miaomiaopass.html">Miaomiao Pass</a>
    <a href="aboutus.html">About Us</a> 
</div>

<main class="cart-container">
    <h3>Home/Your Bag</h3>
    <h2>Your Bag (<span id="cartItemCount">0</span> items)</h2>
    <hr>
    <div id="cartItemsContainer">
        <p class="empty-cart-message">Your bag is empty</p>
    </div>
    <hr>

    <div class="you-might-like">
        <h3>You might like</h3>
        <img src="figmaPics/arrow.png" alt="Arrow" class="arrow">
    </div>
    
    <div class="container">
        <img src="figmaPics/newArrival2.jpg" alt="Product 1">
        <img src="figmaPics/newArrival3.jpg" alt="Product 2">
        <img src="figmaPics/newArrival4.jpg" alt="Product 3">
        <img src="figmaPics/newArrival5.jpg" alt="Product 4">
        <img src="figmaPics/newArrival6.jpg" alt="Product 5">
        <img src="figmaPics/newArrival.jpg" alt="Product 6">
    </div>
</main>

<!-- Footer -->
<aside class="newsletter-signup">
    <h2>SIGN UP FOR JOY DELIVERED TO YOUR INBOX</h2>
    <p>Sign up for our email newsletter to be in the know about new arrivals, special offers, and exclusive events. When you sign up you'll receive 10% off your first purchase!</p>
    <!-- <input type="email" placeholder="Enter your email address here"> -->
    <a href="subscribe.html"><button>JOIN NOW</button></a>
    <div class="social-links">
        <a href="#"><img src="figmaPics/facebook.png" alt="Facebook"></a>
        <a href="#"><img src="figmaPics/Instagram.png" alt="Instagram"></a>
        <a href="#"><img src="figmaPics/x.png" alt="Twitter"></a>
    </div>
</aside>

<script>
    function toggleMenu() {
        var menu = document.getElementById("dropdown");
        menu.classList.toggle("show");
    }

    // Load bag items from localStorage and display them
    function loadBagItems() {
        const bagContents = document.getElementById('cartItemsContainer');
        const cartItemCount = document.getElementById('cartItemCount');
        let bag = JSON.parse(localStorage.getItem('bag')) || [];
        bagContents.innerHTML = '';

        if (bag.length === 0) {
            bagContents.innerHTML = '<p class="empty-cart-message">Your bag is empty</p>';
        } else {
            bag.forEach(product => {
                const productDiv = document.createElement('div');
                productDiv.className = 'cart-item';
                productDiv.innerHTML = `
                    <img src="${product.imageUrl}" alt="${product.title}" />
                    <div class="cart-item-info">
                        <h3>${product.title}</h3>
                        <p>${product.price}</p>
                    </div>
                `;
                bagContents.appendChild(productDiv);
            });
        }

        cartItemCount.textContent = bag.length;
    }

    // Load bag items on page load
    window.onload = loadBagItems;
</script>
</body>
</html>