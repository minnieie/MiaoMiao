<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Account</title>
    <link rel="stylesheet" href="style.css">
    <script defer src="script.js"></script>
</head>
<body>
    <!-- Nav Bar -->
    <nav class="navbar">
        <div class="nav-menu-icon" onclick="toggleMenu()">
            <img src="figmaPics/hamburger.png" alt="Menu">
        </div>
        <div class="nav-logo">
            <a href="index.html"><img src="figmaPics/logo.png" alt="Logo"></a>
        </div>
        <div class="nav-3icons">
            <a href="account.html" id="account-icon"><img src="figmaPics/account.png" alt="Account"></a>
            <a href="wishlist.html"><img src="figmaPics/heart.png" alt="Wishlist"></a>
            <a href="bag.html"><img src="figmaPics/cart.png" alt="Bag"></a>
        </div>
    </nav>

    <main>
        <!-- Create Account Section -->
        <section id="create-account-section" class="create-account-section">
            <h2>Create Your Account</h2>
            <form id="create-account-form">
                <label for="email">Email or Username:</label>
                <input type="text" id="email" placeholder="Enter your email or username" required>

                <label for="password">Password:</label>
                <input type="password" id="password" placeholder="Enter your password" required>

                <label for="country">Country:</label>
                <input type="text" id="country" placeholder="Enter your country" required>

                <label for="first-name">First Name:</label>
                <input type="text" id="first-name" placeholder="Enter your first name" required>

                <label for="last-name">Last Name:</label>
                <input type="text" id="last-name" placeholder="Enter your last name" required>

                <label for="street-address">Street Address:</label>
                <input type="text" id="street-address" placeholder="Enter your street address" required>

                <label for="postal-code">Postal Code:</label>
                <input type="text" id="postal-code" placeholder="Enter your postal code" required>

                <button type="submit">Create Account</button>
            </form>
            <p>Already have an account? <a href="account.html" onclick="redirectToLogin()">Log In</a></p>
        </section>
    </main>

    <script>
        // Function to handle the create account form submission
        document.getElementById('create-account-form').addEventListener('submit', function(event) {
            event.preventDefault();

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const country = document.getElementById('country').value;
            const firstName = document.getElementById('first-name').value;
            const lastName = document.getElementById('last-name').value;
            const streetAddress = document.getElementById('street-address').value;
            const postalCode = document.getElementById('postal-code').value;

            createAccount(email, password, firstName, lastName, streetAddress, postalCode, country);
        });

        // Create Account function (using Firebase or custom backend API)
        async function createAccount(email, password, firstName, lastName, streetAddress, postalCode, country) {
            try {
                // Firebase or backend registration logic here
                const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);
                console.log("User created:", userCredential.user);

                // Additional user details can be saved to Firebase Firestore or a backend API
                const user = firebase.auth().currentUser;
                await user.updateProfile({
                    displayName: `${firstName} ${lastName}`
                });

                // Save additional details (address, country, etc.)
                // Firestore code or API call to save these details would go here

                alert("Account successfully created!");
                // Redirect user to account page or login page after account creation
                window.location.href = "account.html";
            } catch (error) {
                console.error("Error creating account:", error.message);
                alert("Account creation failed. Please try again.");
            }
        }

        // Redirect to login page
        function redirectToLogin() {
            window.location.href = "account.html"; // Modify the link as needed
        }

        // Function to toggle the menu
        function toggleMenu() {
            var menu = document.getElementById("nav-menu");
            menu.classList.toggle("show");
        }
    </script>
</body>
</html>

